[build]
  base    = "/"
  publish = "/dist"
  command = "yarn; yarn build"
  functions = "functions/"

[[redirects]]
  from = "/rss-pg/*"
  to = "https://:splat"
  status = 200
  force = true

[[redirects]]
  from = "/rss-full/*"
  to = ":splat"
  status = 200
  force = true

[[redirects]]
  from = "/rss-less-pg/*"
  to = "http://:splat"
  status = 200
  force = true

[[redirects]]
  from = "/podcasts/*"
  to = "https://feedwrangler.net/api/v2/podcasts/:splat"
  status = 200

[[redirects]]
  from="/cacheds/*"
  to ="https://:splat"
  status = 200
  [redirects.headers]
    cache-control = '''
    max-age=1800000,
    no-cache,
    no-store,
    must-revalidate'''
    
[[redirects]]
  from="/cached/*"
  to ="http://:splat"
  status = 200
  [redirects.headers]
    cache-control = '''
    max-age=1800000,
    no-cache,
    no-store,
    must-revalidate'''

[[redirects]]
  from="/api/*"
  to="/.netlify/functions/:splat"
  status=200

[[redirects]]
  from="/raw/*"
  to="/.netlify/functions/findCast/:splat"
  status=200

[[redirects]]
  from="/lhead/*"
  to="/.netlify/functions/findFinal/:splat"
  status=200

[[redirects]]
  from="/ln/*"
  to="https://listen-api.listennotes.com/api/v2/:splat"
  status=200
  force = true
  [redirects.headers]
    X-From = "Gramophone"
    X-ListenAPI-Key = "ebbd0481aa1b4acc8949a9ffeedf4d7b"

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
